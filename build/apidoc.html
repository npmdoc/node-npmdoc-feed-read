<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/sentientwaffle/feed-read"

    >feed-read (v0.0.1)</a>
</h1>
<h4>a ATOM and RSS feed parser</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.feed-read">module feed-read</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.feed-read.atom">
            function <span class="apidocSignatureSpan">feed-read.</span>atom
            <span class="apidocSignatureSpan">(xml, source, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.feed-read.get">
            function <span class="apidocSignatureSpan">feed-read.</span>get
            <span class="apidocSignatureSpan">(feed_url, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.feed-read.identify">
            function <span class="apidocSignatureSpan">feed-read.</span>identify
            <span class="apidocSignatureSpan">(xml)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.feed-read.rss">
            function <span class="apidocSignatureSpan">feed-read.</span>rss
            <span class="apidocSignatureSpan">(xml, source, callback)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.feed-read" id="apidoc.module.feed-read">module feed-read</a></h1>


    <h2>
        <a href="#apidoc.element.feed-read.atom" id="apidoc.element.feed-read.atom">
        function <span class="apidocSignatureSpan">feed-read.</span>atom
        <span class="apidocSignatureSpan">(xml, source, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">atom = function (xml, source, callback) {
  if (!callback) return FeedRead.atom(xml, &#x22;&#x22;, source);

  var parser   = new FeedParser()
    , articles = []
    // Info about the feed itself, not an article.
    , meta     = {source: source}
    // The current article.
    , article
    // The author for when no author is specified for the post.
    , default_author;


  parser.onopentag = function(tag) {
    if (tag.name == &#x22;entry&#x22;) article = tag;
  };

  parser.onclosetag = function(tagname, current_tag) {
    if (tagname == &#x22;entry&#x22;) {
      articles.push(article);
      article = null;
    } else if (tagname == &#x22;author&#x22; &#x26;&#x26; !article) {
      default_author = child_data(current_tag, &#x22;name&#x22;);
    } else if (tagname == &#x22;link&#x22; &#x26;&#x26; current_tag.attributes.rel != &#x22;self&#x22;) {
      meta.link || (meta.link = current_tag.attributes.href);
    } else if (tagname == &#x22;title&#x22; &#x26;&#x26; !current_tag.parent.parent) {
      meta.name = current_tag.children[0];
    }
  };

  parser.onend = function() {
    callback(null, _.map(articles,
      function(art) {
        var author = child_by_name(art, &#x22;author&#x22;);
        if (author) author = child_data(author, &#x22;name&#x22;);

        var obj = {
            title:     child_data(art, &#x22;title&#x22;)
          , content:   child_data(art, &#x22;content&#x22;)
          , published: child_data(art, &#x22;published&#x22;)
                    || child_data(art, &#x22;updated&#x22;)
          , author:    author || default_author
          , link:      child_by_name(art, &#x22;link&#x22;).attributes.href
          , feed:      meta
          };
        if (obj.published) obj.published = new Date(obj.published);
        return obj;
      }
    ));
  };

  parser.write(xml);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    });

## `feed.rss(rss_string, callback)`
Parse a string of XML as RSS.

The callback receives `(err, articles)`.

## `feed.<span class="apidocCodeKeywordSpan">atom</span>(atom_string, callback)`
Parse a string of XML as ATOM.

The callback receives `(err, articles)`.

## `feed.identify(xml_string)` // =&#x3e; &#x22;atom&#x22;, &#x22;rss&#x22;, or false
Identify what type of feed the XML represents.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.feed-read.get" id="apidoc.element.feed-read.get">
        function <span class="apidocSignatureSpan">feed-read.</span>get
        <span class="apidocSignatureSpan">(feed_url, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (feed_url, callback) {
  request(feed_url, function(err, res, body) {
    if (err) return callback(err);
    var type = FeedRead.identify(body);
    if (type == &#x22;atom&#x22;) {
      FeedRead.atom(body, feed_url, callback);
    } else if (type == &#x22;rss&#x22;) {
      FeedRead.rss(body, feed_url, callback);
    } else {
      return callback(new Error( &#x22;Body is not RSS or ATOM&#x22;
                                , body.substr(0, 30), &#x22;...&#x22;));
    }
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var FeedRead = module.exports = function(feed_url, callback) {
if (feed_url instanceof Array) {
  var feed_urls = feed_url
    , articles  = [];
  var next = function(i) {
    var feed_url = feed_urls[i];
    if (!feed_url) return callback(null, articles);
    FeedRead.<span class="apidocCodeKeywordSpan">get</span>(feed_url, function(err, _articles) {
      if (err) return callback(err);
      articles = articles.concat(_articles);
      next(i + 1);
    });
  };
  next(0);
} else {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.feed-read.identify" id="apidoc.element.feed-read.identify">
        function <span class="apidocSignatureSpan">feed-read.</span>identify
        <span class="apidocSignatureSpan">(xml)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">identify = function (xml) {
  if (/&#x3c;rss /i.test(xml)) {
    return &#x22;rss&#x22;;
  } else if (/&#x3c;feed /i.test(xml)) {
    return &#x22;atom&#x22;;
  } else {
    return false;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
The callback receives `(err, articles)`.

## `feed.atom(atom_string, callback)`
Parse a string of XML as ATOM.

The callback receives `(err, articles)`.

## `feed.<span class="apidocCodeKeywordSpan">identify</span>(xml_string)` // =&#x3e; &#x22;atom&#x22;, &#x22;rss&#x22;, or false
Identify what type of feed the XML represents.

Returns `false` when it is neither RSS or ATOM.


# License
See LICENSE.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.feed-read.rss" id="apidoc.element.feed-read.rss">
        function <span class="apidocSignatureSpan">feed-read.</span>rss
        <span class="apidocSignatureSpan">(xml, source, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">rss = function (xml, source, callback) {
  if (!callback) return FeedRead.rss(xml, &#x22;&#x22;, source);

  var parser   = new FeedParser()
    , articles = []
    // Info about the feed itself, not an article.
    , meta     = {source: source}
    // The current article.
    , article;


  parser.onopentag = function(tag) {
    if (tag.name == &#x22;item&#x22;) article = tag;
  };

  parser.onclosetag = function(tagname, current_tag) {
    if (tagname == &#x22;item&#x22;) {
      articles.push(article);
      article = null;
    } else if (tagname == &#x22;channel&#x22;) {
      meta.link || (meta.link = child_data(current_tag, &#x22;link&#x22;));
      meta.name = child_data(current_tag, &#x22;title&#x22;);
    }
  };

  parser.onend = function() {
    callback(null, _.map(articles,
      function(art) {
        var obj = {
            title:     child_data(art, &#x22;title&#x22;)
          , content:   scrub_html(child_data(art, &#x22;content:encoded&#x22;))
                    || scrub_html(child_data(art, &#x22;description&#x22;))
          , published: child_data(art, &#x22;pubDate&#x22;)
          , author:    child_data(art, &#x22;author&#x22;)
                    || child_data(art, &#x22;dc:creator&#x22;)
          , link:      child_data(art, &#x22;link&#x22;)
          , feed:      meta
          };
        if (obj.published) obj.published = new Date(obj.published);
        return obj;
      }
    ));
  };

  parser.write(xml);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      //   * &#x22;link&#x22;      - The original article link (String).
      //   * &#x22;content&#x22;   - The HTML content of the article (String).
      //   * &#x22;published&#x22; - The date that the article was published (Date).
      //   * &#x22;feed&#x22;      - {name, source, link}
      //
    });

## `feed.<span class="apidocCodeKeywordSpan">rss</span>(rss_string, callback)`
Parse a string of XML as RSS.

The callback receives `(err, articles)`.

## `feed.atom(atom_string, callback)`
Parse a string of XML as ATOM.
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
